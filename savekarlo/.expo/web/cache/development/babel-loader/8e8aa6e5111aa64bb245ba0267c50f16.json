{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\savekarlonative\\\\savekarlo\\\\CommitteeMembers\\\\CommitteeDetailbyMember\\\\AddMember.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { FAB, TextInput } from \"react-native-paper\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport firebase from \"firebase\";\nimport { auth, db } from \"../../firebase\";\nimport styles from \"../../styles\";\nimport { Picker } from \"@react-native-picker/picker\";\n\nvar AddOneCommittee = function AddOneCommittee(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      AllMembers = _React$useState2[0],\n      setAllMembers = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      MembersForPicker = _React$useState4[0],\n      setMembersForPicker = _React$useState4[1];\n\n  var memberCommitteeDetail = [];\n  var comId = route.params.comId;\n\n  var onChangePicker = function onChangePicker(user) {\n    console.log(\"the user at onChangePicker\", user);\n    setMembersForPicker(user);\n  };\n\n  useEffect(function () {\n    var refPicker = db.collection(\"members\");\n    refPicker.onSnapshot(function (query) {\n      var objs = [];\n      query.forEach(function (doc) {\n        objs.push(_objectSpread({\n          id: doc.id\n        }, doc.data()));\n      });\n      console.log(\"objs at add member\", objs);\n      setAllMembers(objs);\n    });\n  }, []);\n\n  var _useForm = useForm(),\n      control = _useForm.control,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.formState.errors;\n\n  var onSubmit = function onSubmit(data) {\n    var refMembers, objs, junctionRel, refJunction;\n    return _regeneratorRuntime.async(function onSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"in the onsubmit and membersfor picker\", MembersForPicker);\n            refMembers = db.collection(\"members\");\n            objs = [];\n            refMembers.where(\"member_id\", \"===\", MembersForPicker);\n            refMembers.onSnapshot(function (query) {\n              query.forEach(function (doc) {\n                objs.push(_objectSpread({\n                  id: doc.id\n                }, doc.data()));\n              });\n            });\n            junctionRel = {\n              com_id: comId,\n              member_id: objs[0],\n              Jan: true,\n              Feb: false,\n              Mar: false,\n              Apr: false,\n              May: false,\n              Jun: false,\n              Jul: false,\n              Aug: false,\n              Sep: false,\n              Oct: false,\n              Nov: false,\n              Dec: false\n            };\n            refJunction = db.collection(\"com_member_rel\");\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(refJunction.add(junctionRel));\n\n          case 9:\n            navigation.goBack();\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  console.log(\"The memberforpicker value before return()\", AllMembers);\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, React.createElement(Picker, {\n    style: styles.picker,\n    selectedValue: MembersForPicker,\n    onValueChange: onChangePicker,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, React.createElement(Picker.Item, {\n    value: \"Select Member\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }), AllMembers && AllMembers.map(function (x) {\n    return React.createElement(Picker.Item, {\n      key: x.id,\n      label: x.email,\n      value: x.uid,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    });\n  })), React.createElement(FAB, {\n    style: styles.fab,\n    icon: \"plus\",\n    onPress: handleSubmit(onSubmit),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default AddOneCommittee;","map":{"version":3,"sources":["E:/savekarlonative/savekarlo/CommitteeMembers/CommitteeDetailbyMember/AddMember.js"],"names":["React","useEffect","FAB","TextInput","useForm","Controller","firebase","auth","db","styles","Picker","AddOneCommittee","route","navigation","useState","AllMembers","setAllMembers","MembersForPicker","setMembersForPicker","memberCommitteeDetail","comId","params","onChangePicker","user","console","log","refPicker","collection","onSnapshot","query","objs","forEach","doc","push","id","data","control","handleSubmit","errors","formState","onSubmit","refMembers","where","junctionRel","com_id","member_id","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","refJunction","add","goBack","picker","map","x","email","uid","fab"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Text, View } from \"react-native\";\r\nimport { FAB, TextInput } from \"react-native-paper\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport firebase from \"firebase\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport styles from \"../../styles\";\r\nimport { Picker } from \"@react-native-picker/picker\";\r\n\r\nconst AddOneCommittee = ({ route, navigation }) => {\r\n  const [AllMembers, setAllMembers] = React.useState([]);\r\n  const [MembersForPicker, setMembersForPicker] = React.useState([]);\r\n\r\n  const memberCommitteeDetail = [];\r\n  const { comId } = route.params;\r\n  const onChangePicker = (user) => {\r\n    console.log(\"the user at onChangePicker\", user);\r\n    setMembersForPicker(user);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const refPicker = db.collection(\"members\");\r\n\r\n    refPicker.onSnapshot((query) => {\r\n      const objs = [];\r\n      query.forEach((doc) => {\r\n        objs.push({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        });\r\n      });\r\n      console.log(\"objs at add member\", objs);\r\n      setAllMembers(objs);\r\n    });\r\n  }, []);\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm();\r\n\r\n  const onSubmit = async (data) => {\r\n    console.log(\"in the onsubmit and membersfor picker\", MembersForPicker);\r\n    const refMembers = db.collection(\"members\");\r\n    const objs = [];\r\n\r\n    refMembers.where(\"member_id\", \"===\",MembersForPicker);\r\n    refMembers.onSnapshot((query) => {\r\n      query.forEach((doc) => {\r\n        objs.push({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        });\r\n      });\r\n    });\r\n\r\n    var junctionRel = {\r\n      com_id: comId,\r\n      member_id: objs[0],\r\n      Jan: true,\r\n      Feb: false,\r\n      Mar: false,\r\n      Apr: false,\r\n      May: false,\r\n      Jun: false,\r\n      Jul: false,\r\n      Aug: false,\r\n      Sep: false,\r\n      Oct: false,\r\n      Nov: false,\r\n      Dec: false,\r\n    };\r\n    const refJunction = db.collection(\"com_member_rel\");\r\n\r\n    await refJunction.add(junctionRel);\r\n    navigation.goBack();\r\n  };\r\n\r\n  console.log(\"The memberforpicker value before return()\", AllMembers);\r\n\r\n  return (\r\n    <>\r\n      <View>\r\n        <Picker\r\n          style={styles.picker}\r\n          selectedValue={MembersForPicker}\r\n          onValueChange={onChangePicker}\r\n        >\r\n          <Picker.Item value=\"Select Member\"></Picker.Item>\r\n          {AllMembers &&\r\n            AllMembers.map((x) => (\r\n              <Picker.Item key={x.id} label={x.email} value={x.uid} />\r\n            ))}\r\n        </Picker>\r\n        <FAB style={styles.fab} icon=\"plus\" onPress={handleSubmit(onSubmit)} />\r\n      </View>\r\n    </>\r\n  );\r\n};\r\nexport default AddOneCommittee;\r\n"]},"metadata":{},"sourceType":"module"}